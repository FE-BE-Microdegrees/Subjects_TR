---
marp: true
---

# Web Development

## Back-End Development

---

## Today's Topics

- Review of the previous lecture
- [Authentication and Authorization](https://github.com/FE-BE-Microdegrees/Subjects/blob/main/Back-End-Frameworks/Topics/Auth/README.md)
- [Bcrypt](https://github.com/FE-BE-Microdegrees/Subjects/blob/main/Back-End-Frameworks/Topics/Bcrypt/README.md)
- [JWT](https://github.com/FE-BE-Microdegrees/Subjects/blob/main/Back-End-Frameworks/Topics/JWT/README.md)
- [Sending Data to Express API - Header](https://github.com/FE-BE-Microdegrees/Subjects/blob/main/Back-End-Frameworks/Topics/Sending-Data-To-Express/README.md#headers)
- Implementing Authentication and Authorization
- [Relational Database](https://github.com/FE-BE-Microdegrees/Subjects/blob/main/Databases/Topics/Relational-Database/README.md)
- [MySQL](https://github.com/FE-BE-Microdegrees/Subjects/blob/main/Databases/Topics/MySQL/README.md)
- [MySQL in Docker](https://github.com/FE-BE-Microdegrees/Subjects/blob/main/Databases/Topics/Docker-MySQL/README.md)

---

## What Did We Discuss in the Previous Lecture?

---

## Authentication and Authorization

Authentication is the process by which a user, system, or other entity verifies the claimed identity of another entity, usually based on some form of credential:

- something you know (e.g., password, PIN, CAPTCHA, security question);
- something you have (e.g., ID card, bank card, phone number, email, hardware token, password card, certificate) or
- something you are (e.g., fingerprint, facial recognition, iris pattern).

---

## Authorization

`Authorization` is the process that grants (or denies) permission to access (network) resources. For instance, most e-commerce security systems rely on a two-step process. First, there’s `authentication` to verify that the user is who they claim to be, then `authorization` allows the user access to resources they are entitled to.

---

## How Does Authentication and Authorization Work in an API?

- User identification - how?
- User permissions?
- When and how are user permissions checked?

---

## Password Hashing

Hashing vs. encryption

---

## Hashing

- Hashing is the process of converting an input (e.g., password) into a fixed-length output, called a hash value.
- A hash value is unique and cannot be reversed to its original input.
- Hashing is often used to secure data because it’s unique and cannot be converted back to the original input.

> But... can it really not be reversed?

---

## Bcrypt

`Bcrypt` is a hashing function primarily used for hashing passwords.

**Security**: Unlike many other hashing functions, `bcrypt` is intentionally slow, making it harder for attackers to crack passwords by brute force. The slowness can be adjusted by increasing or decreasing the number of `salt` rounds.

---

## Bcrypt - Salting

**Salting**: `Bcrypt` automatically includes a salting feature. Salting means adding random data to the password before hashing, which prevents hash values from repeating for the same passwords and complicates attackers' efforts, particularly against precomputed hash tables (also known as `rainbow tables`).

---

## Using Bcrypt

When we have hashed passwords in our database, how can we verify that the password entered by the user is correct if we cannot reverse the hashed password to its original form?

---

## Using Bcrypt - Example

```js
// Importing bcrypt
const bcrypt = require('bcrypt');

const saltRounds = 10;

const hashService = {
  hash: async (password) => {
    const hash = await bcrypt.hash(password, saltRounds);
    return hash;
  },
  compare: async (password, hash) => {
    const match = await bcrypt.compare(password, hash);
    return match;
  },
};

module.exports = hashService;
```

---

## When Should We Hash the Password?

---

## JSON Web Token (JWT)

JWT (JSON Web Token) is an open standard (RFC 7519) used for securely transmitting information between parties in JSON format. It’s particularly useful for authentication and information exchange, as it allows for secure and efficient data transmission. JWTs are compact and easy to use in various scenarios, including web application authentication and authorization.
---

## JWT Components

JWT consists of three parts, separated by dots (.):

- Header 
- Payload 
- Signature

---

## Header 

The header contains information about the type of token and the signing algorithm used (e.g., HMAC SHA256 or RSA).

```json
{
  "alg": "HS256",
  "typ": "JWT"
}
```

---

## Payload 

The payload contains claims, which are pieces of information encoded within the JWT. Claims can be standardized, public, or private.

```json
{
  "sub": "1234567890",
  "name": "John Doe",
  "admin": true
}
```

---

## Signature

The signature is generated by combining the header and payload and using a secret key. The signature verifies the JWT's validity and authenticity.

---

## JWT Structure

JWT structure is as follows:
  
```bash
xxxxx.yyyyy.zzzzz
```

where: xxxxx is the header, yyyyy is the payload, and zzzzz is the signature, all encoded in base64-url format.

---

## JWT Example

```bash
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
```

---

## Using JWT

How can we use JWT in authentication and authorization processes?

---

## Sending Data to Express API - Header

It's often necessary to send data to the API related to user authentication and authorization. How is this done?

---

## Authorization Header

The `Authorization` header can be used to send authentication data, such as a JWT token.

---

## Implementing JWT Authentication and Authorization

---

## Homework

- Read through today’s lecture materials
- Implement Authentication and Authorization in your API
- Ensure that Docker Desktop is installed on your computer and it is working
